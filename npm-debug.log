0 info it worked if it ends with ok
1 verbose cli [ '/Users/ethan/.nvm/v0.10.36/bin/node',
1 verbose cli   '/Users/ethan/.nvm/v0.10.36/bin/npm',
1 verbose cli   'publish' ]
2 info using npm@1.4.28
3 info using node@v0.10.36
4 verbose publish [ '.' ]
5 verbose cache add [ '.', null ]
6 verbose cache add name=undefined spec="." args=[".",null]
7 verbose parsed url { protocol: null,
7 verbose parsed url   slashes: null,
7 verbose parsed url   auth: null,
7 verbose parsed url   host: null,
7 verbose parsed url   port: null,
7 verbose parsed url   hostname: null,
7 verbose parsed url   hash: null,
7 verbose parsed url   search: null,
7 verbose parsed url   query: null,
7 verbose parsed url   pathname: '.',
7 verbose parsed url   path: '.',
7 verbose parsed url   href: '.' }
8 silly lockFile 3a52ce78- .
9 verbose lock . /Users/ethan/.npm/3a52ce78-.lock
10 verbose tar pack [ '/Users/ethan/.npm/ioc-migrate/0.0.2/package.tgz', '.' ]
11 verbose tarball /Users/ethan/.npm/ioc-migrate/0.0.2/package.tgz
12 verbose folder .
13 info prepublish ioc-migrate@0.0.2
14 silly lockFile 1f1177db-tar tar://.
15 verbose lock tar://. /Users/ethan/.npm/1f1177db-tar.lock
16 silly lockFile d9ab833c-pm-ioc-migrate-0-0-2-package-tgz tar:///Users/ethan/.npm/ioc-migrate/0.0.2/package.tgz
17 verbose lock tar:///Users/ethan/.npm/ioc-migrate/0.0.2/package.tgz /Users/ethan/.npm/d9ab833c-pm-ioc-migrate-0-0-2-package-tgz.lock
18 silly lockFile 1f1177db-tar tar://.
19 silly lockFile 1f1177db-tar tar://.
20 silly lockFile d9ab833c-pm-ioc-migrate-0-0-2-package-tgz tar:///Users/ethan/.npm/ioc-migrate/0.0.2/package.tgz
21 silly lockFile d9ab833c-pm-ioc-migrate-0-0-2-package-tgz tar:///Users/ethan/.npm/ioc-migrate/0.0.2/package.tgz
22 silly lockFile 8d17bb92-an-npm-ioc-migrate-0-0-2-package /Users/ethan/.npm/ioc-migrate/0.0.2/package
23 verbose lock /Users/ethan/.npm/ioc-migrate/0.0.2/package /Users/ethan/.npm/8d17bb92-an-npm-ioc-migrate-0-0-2-package.lock
24 silly lockFile 8d17bb92-an-npm-ioc-migrate-0-0-2-package /Users/ethan/.npm/ioc-migrate/0.0.2/package
25 silly lockFile 8d17bb92-an-npm-ioc-migrate-0-0-2-package /Users/ethan/.npm/ioc-migrate/0.0.2/package
26 silly lockFile 3a52ce78- .
27 silly lockFile 3a52ce78- .
28 silly publish { name: 'ioc-migrate',
28 silly publish   version: '0.0.2',
28 silly publish   description: 'An unopinionated Node.js DB migration flow that works for any DB that works for your app.',
28 silly publish   main: 'index.js',
28 silly publish   scripts: { test: './node_modules/mocha/bin/mocha' },
28 silly publish   keywords: [ 'db', 'database', 'migration', 'migrate' ],
28 silly publish   author: { name: 'Ethan Garofolo', email: 'ethan@suchsoftware.com' },
28 silly publish   license: 'MIT',
28 silly publish   dependencies:
28 silly publish    { async: '^1.4.0',
28 silly publish      commander: '^2.8.1',
28 silly publish      debug: '^2.2.0',
28 silly publish      'sprintf-js': '^1.0.3' },
28 silly publish   devDependencies: { mocha: '^2.2.5', 'sprintf-js': '^1.0.3' },
28 silly publish   readme: '# ioc-migrate\n\nThe flow of migrations.  You supply the details.  Works for any database, be it relational, NoSQL, or whatever.\n\nMost migration frameworks are limited by the database adapters they can provide.  If you\'re not running one of the popular databases, there\'s a good chance the existing migration tools won\'t have an adapter for you.\n\nBut you\'ve built an app, and you\'ve figured out how to work with your database.  Why should a migration layer duplicate all that effort?\n\nJust like how Passport abstracted out the flow of user authentication leaving you to supply the details specific to your app, `ioc-migrate` does the same for managing data migrations.\n\n## Installation\n\n`npm install --save ioc-migrate`\n\n## Use\n\nTo use `ioc-migrate` you define what it means to perform a few operations on your database.  You\'ll provide a file with a few definitions. The file looks something like this:\n\n    module.exports = configFunction\n\n    function configFunction() {\n      return {\n         // ... values we\'ll discuss in just a moment\n      }\n    }\n\nYou provide a function `ioc-migrate` will call.  That function returns an object with your app-specific details.  Here are the details you need:\n\n```javascript\n{\n  getDb: function (cb) { } // A function the gets a database connection.  How does your app get a connection to its database?\n, doesMIgrationsTableExist: function (db, cb) { } // Given a connection to your database, how would you tell if the table/collection that keeps track of which migrations you\'ve run exists?\n, createMigrationsTable: function (db, cb) { } // Given a connection to your database, how do you create a table/collection to keep track of which migrations you\'ve run?\n, getPerformedMigrations: function (db, cb) { } // Given a connection to your databse, how do ask the table/collection that keeps track of which migrations you\'ve run which migrations you\'ve run?\n, migrationsPath: \'path/to/your/migration/files\' // where on your filesystem do you store your migration files?\n, insertAMigrationIntoMigrationsTable: function (db, version, cb) // given a connection to your database, how would you insert into your table/collection that keeps track of which migrations you\'ve run that you\'ve run another one?\n, deleteAMigrationFromMigrationsTable: function (db, version, cb) // given a connection to your database, if you had roled back a migration, how would you remove a record of that migration from your table/collection that keeps track of which migrations you\'ve run?\n}\n```\n\nYou then have some directory full of migration files located at the path you specified in `migrationsPath` above.  Their filenames should be of the format:\n\n    <some increasing number>_<some human-readable name for the file>.js\n\nThere\'s a command-line tool documented below that you can use to help you generate those files.  The files should set 2 functions on `exports`.  For example:\n\n```\nexports.up = function (db, cb) {\n\n}\n\nexports.down = function (db, cb) {\n\n}\n```\n\nEach function receives a database connection (which your code supplied).  It then does its business and calls its callback, passing in any errors.\n\n### The command line tools\n\n#### The migrate tool\n\n`ioc-migrate` provides a few command-line utilities to help you out.  Assuming you\'ve defined your configuration file as mentioned above, you can then run your migrations using the `migrate` script found in `bin/migrate`.  For example:\n\n    ./node_modules/ioc-migrate/bin/migrate\n\nBy default, `ioc-migrate` will look for your config file at `your/app/root/schema/iocmigrateConfig.js`. You can give it a different location via the `-c` option,  For example:\n\n    ./node_modules/ioc-migrate/bin/migrate -c some/other/path.js\n\n#### Generating a new migration\n\nComing up with filenames for your migrations could be tedious, so `ioc-migrate` ships with a command-line tool to help you do that.  To use it, run:\n\n    ./node_modules/ioc-migrate/bin/generate humanReadableName\n\nNote that you don\'t supply `.js` on the end of that human-readable name.  What you use in the place of humanReadableName becomes part of the file\'s name, so only use alphanumeric characters.\n\n`generate` also accepts the same `-c` option to specify the location of your config file if you don\'t like the default.\n\n#### Creating your config file\n\n// TODO: This is not done yet\n\nTo lay down a placeholder for your config file, you can run:\n\n    ./node_modules/ioc-migrate/bin/init\n\nThis will lay down a skeleton config file in the default location.  Again, if you prefer a different location, use the `-c` option.\n\n## Want to contribute?\n\nOpen an issue, and let\'s talk about it.  We\'ll likely accept PRs.\n\n## Tests\n\n`npm test`\n\n## License\n\nMIT\n',
28 silly publish   readmeFilename: 'README.md',
28 silly publish   gitHead: '24a2b0a6f715234320a55a128f2db90a40ca5ab7',
28 silly publish   _id: 'ioc-migrate@0.0.2',
28 silly publish   _shasum: 'adc83212d32727553c595c5915ab1e0d24a6f29e',
28 silly publish   _from: '.' }
29 verbose request where is /ioc-migrate
30 verbose request registry https://registry.npmjs.org/
31 verbose request id d6956dd33317b350
32 verbose url raw /ioc-migrate
33 verbose url resolving [ 'https://registry.npmjs.org/', './ioc-migrate' ]
34 verbose url resolved https://registry.npmjs.org/ioc-migrate
35 verbose request where is https://registry.npmjs.org/ioc-migrate
36 info trying registry request attempt 1 at 10:03:27
37 http PUT https://registry.npmjs.org/ioc-migrate
38 http 403 https://registry.npmjs.org/ioc-migrate
39 verbose headers { 'content-type': 'application/json',
39 verbose headers   'cache-control': 'max-age=60',
39 verbose headers   'content-length': '95',
39 verbose headers   'accept-ranges': 'bytes',
39 verbose headers   date: 'Thu, 27 Aug 2015 16:03:28 GMT',
39 verbose headers   via: '1.1 varnish',
39 verbose headers   connection: 'keep-alive',
39 verbose headers   'x-served-by': 'cache-lax1426-LAX',
39 verbose headers   'x-cache': 'MISS',
39 verbose headers   'x-cache-hits': '0',
39 verbose headers   'x-timer': 'S1440691408.257716,VS0,VE261' }
40 error publish Failed PUT 403
41 error Error: "You cannot publish over the previously published version 0.0.2." : ioc-migrate
41 error     at RegClient.<anonymous> (/Users/ethan/.nvm/v0.10.36/lib/node_modules/npm/node_modules/npm-registry-client/lib/request.js:308:14)
41 error     at Request._callback (/Users/ethan/.nvm/v0.10.36/lib/node_modules/npm/node_modules/npm-registry-client/lib/request.js:246:65)
41 error     at Request.self.callback (/Users/ethan/.nvm/v0.10.36/lib/node_modules/npm/node_modules/request/request.js:236:22)
41 error     at Request.emit (events.js:98:17)
41 error     at Request.<anonymous> (/Users/ethan/.nvm/v0.10.36/lib/node_modules/npm/node_modules/request/request.js:1142:14)
41 error     at Request.emit (events.js:117:20)
41 error     at IncomingMessage.<anonymous> (/Users/ethan/.nvm/v0.10.36/lib/node_modules/npm/node_modules/request/request.js:1096:12)
41 error     at IncomingMessage.emit (events.js:117:20)
41 error     at _stream_readable.js:944:16
41 error     at process._tickCallback (node.js:442:13)
42 error If you need help, you may report this *entire* log,
42 error including the npm and node versions, at:
42 error     <http://github.com/npm/npm/issues>
43 error System Darwin 14.4.0
44 error command "/Users/ethan/.nvm/v0.10.36/bin/node" "/Users/ethan/.nvm/v0.10.36/bin/npm" "publish"
45 error cwd /Users/ethan/source/suchsoftware/ioc-migrate
46 error node -v v0.10.36
47 error npm -v 1.4.28
48 verbose exit [ 1, true ]
